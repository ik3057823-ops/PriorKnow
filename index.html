<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Food Vocabulary Self‑Assessment</title>
<style>
:root{--bg:#ffffff;--fg:#0f172a;--muted:#475569;--muted2:#64748b;--border:#e2e8f0;--accent:#111827;--pill:#f1f5f9}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}.wrap{max-width:880px;margin:0 auto;padding:24px}
.h1{font-size:28px;font-weight:700;margin:0 0 6px}.muted{color:var(--muted)}
.card{border:1px solid var(--border);border-radius:14px;background:#fff}
.card>.c{padding:16px}
.row{display:flex;gap:12px;align-items:center}
.legend{display:grid;gap:6px;margin:0;padding-left:18px}
.legend li{font-size:14px}
.progress{height:10px;background:#eef2f7;border-radius:999px;overflow:hidden}
.progress>i{display:block;height:100%;background:var(--accent);width:0}
.grid{display:grid;gap:12px}
.btn{border:1px solid var(--border);background:#fff;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn.ghost{background:transparent}
.btn.primary{background:var(--accent);color:#fff;border-color:var(--accent)}
.pill{display:inline-block;background:var(--pill);border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;color:var(--muted2)}
.hstack{display:flex;justify-content:space-between;align-items:center}
.inline-btns{display:inline-flex;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.inline-btns .btn{border-radius:0;border:0}
.inline-btns .btn+.btn{border-left:1px solid var(--border)}
.small{font-size:12px;color:var(--muted2)}
.kv{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center}
.badge{font-size:12px;border:1px solid var(--border);border-radius:999px;padding:2px 8px}
.aspect{position:relative;padding-top:56.25%;border-radius:12px;overflow:hidden;background:#000}
.aspect iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
.dots{display:flex;gap:6px;flex-wrap:wrap}
.dot{width:28px;height:8px;border-radius:999px;background:#cbd5e1;border:0}
.dot.active{background:#0f172a}
.dot.done{background:#64748b}
.section{display:none}
.section.active{display:block}
</style>
</head>
<body>
<div class="wrap">
  <div class="section active" id="sec-rate">
    <div class="h1">Food Vocabulary — Quick Self‑Check</div>
    <div class="muted">Choose <b>one number (1–5)</b> for each word. Keep it fast and simple.</div>
    <div class="card" style="margin-top:12px"><div class="c">
      <div class="row" style="gap:8px"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#334155" stroke-width="1.5"/><path d="M12 8.00049V12.0005" stroke="#334155" stroke-width="1.5" stroke-linecap="round"/><path d="M12 16.0005H12.01" stroke="#334155" stroke-width="1.5" stroke-linecap="round"/></svg><div style="font-weight:600;color:#334155">What the numbers mean</div></div>
      <ol class="legend">
        <li><b>1. Brand‑new</b> — I haven't met this word before.</li>
        <li><b>2. Looks familiar</b> — I've seen it, but I'm not sure.</li>
        <li><b>3. I get it when I read</b> — I can explain the meaning.</li>
        <li><b>4. Sentence‑ready</b> — I can use it in a simple sentence.</li>
        <li><b>5. Confident & flexible</b> — I can use it with collocations/register.</li>
      </ol>
    </div></div>
    <div style="margin-top:12px">
      <div class="hstack small"><span id="rated-count">Rated: 0/5</span><span id="rated-pct">0%</span></div>
      <div class="progress" style="margin-top:6px"><i id="progress-bar"></i></div>
    </div>
    <div class="grid" style="margin-top:14px" id="word-list"></div>
    <div class="hstack" style="margin-top:14px">
      <div class="small">That’s it. Fast snapshot before learning.</div>
      <div class="row">
        <button class="btn" id="btn-clear">Clear</button>
        <button class="btn primary" id="btn-next-1">Next</button>
      </div>
    </div>
  </div>
  <div class="section" id="sec-summary">
    <div class="h1">Summary & Next Steps</div>
    <div class="muted" id="summary-sub"></div>
    <div class="grid" style="margin-top:12px" id="summary-cards"></div>
    <div class="hstack" style="margin-top:14px">
      <button class="btn" id="btn-back-2">Back</button>
      <button class="btn primary" id="btn-next-2">Next</button>
    </div>
  </div>
  <div class="section" id="sec-video">
    <div class="h1">Targeted Video Practice</div>
    <div class="muted">We’ll skip words you already use well (4–5). You can switch to the full video any time.</div>
    <div style="margin-top:12px">
      <div class="hstack small"><span id="seg-count">Segments completed: 0/0</span><span id="seg-pct">0%</span></div>
      <div class="progress" style="margin-top:6px"><i id="seg-bar"></i></div>
    </div>
    <div class="hstack" style="margin-top:12px">
      <div class="small">Mode: <b id="mode-label">Focused segments (1–3)</b></div>
      <div class="row"><button class="btn" id="btn-full">Watch full video</button><button class="btn primary" id="btn-focused">Watch focused parts</button></div>
    </div>
    <div class="card" style="margin-top:12px"><div class="c" id="video-area"></div></div>
    <div class="hstack" style="margin-top:14px">
      <button class="btn" id="btn-back-3">Back</button>
      <div class="small">Tip: Use focused parts first, then watch the full video.</div>
    </div>
  </div>
</div>
<script>
(function(){
  var WORDS=["diet","junk food","whole food","food security","takeaway"];
  var LEVELS=[{v:1,s:"Brand‑new",d:"I haven't met this word before."},{v:2,s:"Looks familiar",d:"I've seen it, but I'm not sure."},{v:3,s:"I get it when I read",d:"I can explain the meaning."},{v:4,s:"Sentence‑ready",d:"I can use it in a simple sentence."},{v:5,s:"Confident & flexible",d:"I can use it with collocations/register."}];
  var ACTIONS={1:{t:"Before you learn: make it visible",a:["Check a simple definition + picture (L1 allowed).","Say it aloud and mark the stressed syllable.","Write a 5‑word hint (e.g., 'food plan over time')."]},2:{t:"Firm up meaning & form",a:["Do a quick 'true/false' definition check.","Create one personal example (short, simple).","Add one synonym or contrast word (e.g., 'fresh vs processed')."]},3:{t:"Bridge to using it",a:["Complete one sentence frame (e.g., 'a ___ meal').","Choose one safe collocation and use it once (e.g., 'nutritious meal').","Note the grammar pattern if needed (e.g., 'be tempted to + V')."]},4:{t:"Stretch your use",a:["Write 2 different sentences (change tense/register).","Add 2 collocations or a typical context (e.g., 'highly processed').","Swap word family once (e.g., 'digest' → 'digestion')."]},5:{t:"Keep it active",a:["Teach it in 10 seconds to a peer (or record yourself).","Write one tricky distractor sentence to challenge others.","Schedule spaced review (1, 3, 7 days)."]}};
  var starts={"diet":46,"junk food":132,"whole food":225,"food security":287,"takeaway":359};
  var VIDEO_ID="LRKlGG0oYKw";
  var S={rate:document.getElementById("sec-rate"),summary:document.getElementById("sec-summary"),video:document.getElementById("sec-video")};
  function show(id){for(var k in S){S[k].classList.remove("active")}S[id].classList.add("active")}
  var ratings;try{ratings=JSON.parse(localStorage.getItem("food-vocab-minimal"))}catch(e){ratings=null}
  if(!ratings){ratings={};for(var i=0;i<WORDS.length;i++){ratings[WORDS[i]]=0}}
  function save(){try{localStorage.setItem("food-vocab-minimal",JSON.stringify(ratings))}catch(e){}}
  function renderRate(){var rated=0;var vals=Object.keys(ratings);for(var i=0;i<vals.length;i++){if(ratings[vals[i]]>0)rated++}
    document.getElementById("rated-count").textContent="Rated: "+rated+"/"+WORDS.length;
    document.getElementById("rated-pct").textContent=Math.round(rated/WORDS.length*100)+"%";
    document.getElementById("progress-bar").style.width=(rated/WORDS.length*100)+"%";
    var list=document.getElementById("word-list");list.innerHTML="";
    for(var wi=0;wi<WORDS.length;wi++){
      var w=WORDS[wi];
      var card=document.createElement("div");card.className="card";
      var c=document.createElement("div");c.className="c";
      var top=document.createElement("div");top.className="hstack";
      var tt=document.createElement("div");tt.innerHTML='<div style="font-weight:600;font-size:18px;line-height:1.2">'+w+'</div><div class="small">Pick 1–5</div>';
      var btns=document.createElement("div");btns.className="inline-btns";
      for(var li=0;li<LEVELS.length;li++){
        (function(L){var b=document.createElement("button");b.className="btn"+(ratings[w]===L.v?" primary":" ghost");b.textContent=String(L.v);b.setAttribute("aria-label",w+": "+L.v+" "+L.s);b.onclick=function(){ratings[w]=L.v;save();renderRate()};btns.appendChild(b)})(LEVELS[li]);
      }
      top.appendChild(tt);top.appendChild(btns);c.appendChild(top);
      if(ratings[w]>0){var L=LEVELS.filter(function(x){return x.v===ratings[w]})[0];var desc=document.createElement("div");desc.className="small";desc.style.border="1px solid var(--border)";desc.style.background="#f8fafc";desc.style.padding="8px";desc.style.borderRadius="10px";desc.innerHTML='<b>'+L.s+':</b> '+L.d;c.appendChild(desc)}
      card.appendChild(c);list.appendChild(card)
    }
  }
  function renderSummary(){var totalRated=0;var keys=Object.keys(ratings);for(var i=0;i<keys.length;i++){if(ratings[keys[i]]>0)totalRated++}
    document.getElementById("summary-sub").textContent='Pre‑learning plan based on your self‑check ('+totalRated+'/'+WORDS.length+') rated.';
    var groups={1:[],2:[],3:[],4:[],5:[]};
    for(var i2=0;i2<keys.length;i2++){var w=keys[i2];var v=ratings[w];if(v>0)groups[v].push(w)}
    var host=document.getElementById("summary-cards");host.innerHTML="";
    for(var j=0;j<LEVELS.length;j++){
      var L=LEVELS[j];
      var card=document.createElement("div");card.className="card";
      var c=document.createElement("div");c.className="c";
      var head=document.createElement("div");head.className="kv";head.innerHTML='<div style="font-weight:600">'+L.v+'. '+L.s+'</div><div class="badge">'+groups[L.v].length+' word(s)</div>';
      c.appendChild(head);
      var ul=document.createElement("ul");ul.style.margin="8px 0 0 18px";
      for(var k=0;k<ACTIONS[L.v].a.length;k++){var li=document.createElement("li");li.textContent=ACTIONS[L.v].a[k];li.style.fontSize="14px";li.style.color="var(--muted)";ul.appendChild(li)}
      c.appendChild(ul);
      if(groups[L.v].length){var you=document.createElement("div");you.className="small";you.style.marginTop="6px";you.innerHTML='<b>Your words:</b> '+groups[L.v].join(', ');c.appendChild(you)}
      card.appendChild(c);host.appendChild(card)
    }
  }
  function buildUrl(start,end){var p=new URLSearchParams({rel:"0",modestbranding:"1",controls:"1"});if(typeof start!=="undefined")p.set("start",String(start));if(typeof end!=="undefined")p.set("end",String(end));p.set("autoplay","0");return 'https://www.youtube-nocookie.com/embed/'+VIDEO_ID+'?'+p.toString()}
  function fmt(t){var m=('0'+Math.floor(t/60)).slice(-2);var s=('0'+(t%60)).slice(-2);return m+':'+s}
  function renderVideo(){var ordered=["diet","junk food","whole food","food security","takeaway"];var segs=[];for(var i=0;i<ordered.length;i++){var w=ordered[i];segs.push({word:w,start:starts[w],end:i<ordered.length-1?starts[ordered[i+1]]-1:undefined,level:ratings[w]||0})}
    var needed=segs.filter(function(s){return s.level>=1&&s.level<=3});var full=false;var idx=0;var completed=[];for(var i3=0;i3<needed.length;i3++){completed.push(false)}
    var area=document.getElementById("video-area");var segCount=document.getElementById("seg-count");var segPct=document.getElementById("seg-pct");var segBar=document.getElementById("seg-bar");var modeLabel=document.getElementById("mode-label");var btnFull=document.getElementById("btn-full");var btnFocused=document.getElementById("btn-focused");
    function updateProg(){var total=needed.length;var done=0;for(var i=0;i<completed.length;i++){if(completed[i])done++}var pct=total?Math.round(done/total*100):0;segCount.textContent='Segments completed: '+done+'/'+total;segPct.textContent=pct+'%';segBar.style.width=pct+'%'}
    function renderPlayer(){modeLabel.textContent=full?'Full video (no skips)':'Focused segments (1–3)';area.innerHTML="";if(full){var d1=document.createElement("div");d1.className="aspect";d1.innerHTML='<iframe src="'+buildUrl()+'" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>';area.appendChild(d1)}else{if(!needed.length){var n=document.createElement("div");n.className="small";n.textContent="Nice! You rated everything 4–5. Switch to Full video to watch without skips.";area.appendChild(n);return}var cur=needed[idx];var wrap=document.createElement("div");wrap.className="grid";var meta=document.createElement("div");meta.className="small";meta.innerHTML='<b>Segment '+(idx+1)+' of '+needed.length+'</b> — '+cur.word;var d2=document.createElement("div");d2.className="aspect";d2.innerHTML='<iframe src="'+buildUrl(cur.start,cur.end)+'" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>';var controls=document.createElement("div");controls.className="hstack";var time=document.createElement("div");time.className="small";time.textContent='Starts at '+fmt(cur.start)+(cur.end?' · ends at '+fmt(cur.end):'');var btns=document.createElement("div");btns.className="row";var b1=document.createElement("button");b1.className="btn";b1.textContent="Prev";b1.disabled=idx===0;b1.onclick=function(){idx=Math.max(0,idx-1);renderPlayer()};var b2=document.createElement("button");b2.className="btn";b2.textContent="Mark complete";b2.onclick=function(){completed[idx]=true;updateProg()};var b3=document.createElement("button");b3.className="btn primary";b3.textContent="Next";b3.disabled=idx===needed.length-1;b3.onclick=function(){idx=Math.min(needed.length-1,idx+1);renderPlayer()};btns.appendChild(b1);btns.appendChild(b2);btns.appendChild(b3);controls.appendChild(time);controls.appendChild(btns);var dots=document.createElement("div");dots.className="dots";for(var i=0;i<needed.length;i++){(function(i){var dot=document.createElement("button");var cls="dot "+(i===idx?"active":(completed[i]?"done":""));dot.className=cls;dot.onclick=function(){idx=i;renderPlayer()};dots.appendChild(dot)})(i)}wrap.appendChild(meta);wrap.appendChild(d2);wrap.appendChild(controls);wrap.appendChild(dots);area.appendChild(wrap)}}
    document.getElementById("btn-full").onclick=function(){full=true;renderPlayer()};
    document.getElementById("btn-focused").onclick=function(){full=false;renderPlayer()};
    renderPlayer();updateProg()
  }
  function bind(){document.getElementById("btn-clear").onclick=function(){if(!confirm("Clear all ratings?"))return;ratings={};for(var i=0;i<WORDS.length;i++){ratings[WORDS[i]]=0}save();renderRate()};document.getElementById("btn-next-1").onclick=function(){var all=true;for(var i=0;i<WORDS.length;i++){if(!(ratings[WORDS[i]]>0))all=false}if(!all&&!confirm("Some words are unrated. Continue to summary?"))return;renderSummary();show("summary")};document.getElementById("btn-back-2").onclick=function(){show("rate")};document.getElementById("btn-next-2").onclick=function(){renderVideo();show("video")};document.getElementById("btn-back-3").onclick=function(){show("summary")}}
  function initWords(){var list=document.getElementById("word-list");list.innerHTML=""}
  function start(){renderRate();bind()}
  start()
})();
</script>
</body>
</html>
